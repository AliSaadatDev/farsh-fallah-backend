<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹ Ùˆ Ø¯Ù‚ÛŒÙ‚ API â€” Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ø´ ÙÙ„Ø§Ø­</title>
  <style>
    :root{--bg:#fbfcfd;--card:#ffffff;--accent:#0ea5a3;--muted:#6b7280;--shadow:0 8px 30px rgba(2,6,23,0.06)}
    body{font-family:"Vazirmatn",sans-serif;background:var(--bg);padding:28px;color:#07132a;line-height:1.7}
    .container{max-width:1100px;margin:0 auto}
    h1{margin:0 0 8px}
    .muted{color:var(--muted)}
    .card{background:var(--card);padding:18px;border-radius:12px;box-shadow:var(--shadow);margin:18px 0}
    .endpoint{border-right:6px solid var(--accent)}
    .method{display:inline-block;padding:6px 10px;border-radius:6px;color:#fff;font-weight:700;margin-left:8px}
    .GET{background:#16a34a}.POST{background:#2563eb}.PATCH{background:#f59e0b}.DELETE{background:#ef4444}
    pre{background:#0f172a;color:#f8fafc;padding:12px;border-radius:8px;overflow:auto}
    code{background:#f1f5f9;padding:2px 6px;border-radius:6px}
    table{width:100%;border-collapse:collapse;margin-top:12px}
    table th,table td{padding:8px;border-bottom:1px solid #eef2f7;text-align:right}
    .small{font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ“˜ Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¬Ø§Ù…Ø¹ Ùˆ Ø¯Ù‚ÛŒÙ‚ API â€” Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ÙØ±Ø´ ÙÙ„Ø§Ø­</h1>
    <p class="muted">Ø§ÛŒÙ† Ø³Ù†Ø¯ Ú©Ø§Ù…Ù„â€ŒØªØ±ÛŒÙ† ØªÙˆØ¶ÛŒØ­ Ø¯Ø±Ø¨Ø§Ø±Ù‡Ù” Ù¾Ø±ÙˆÚ˜Ù‡Ù” ÙØ¹Ù„ÛŒ Ø´Ù…Ø§Ø³Øª: Ø³Ø§Ø®ØªØ§Ø± Ù…Ø¯Ù„â€ŒÙ‡Ø§ØŒ Ø±ÙØªØ§Ø± endpointÙ‡Ø§ØŒ Ù†Ø­ÙˆÙ‡Ù” Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ±ØŒ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ request/responseØŒ Ø®Ø·Ø§Ù‡Ø§ Ùˆ Ù†Ú©Ø§Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ. Ù‡Ù…Ù‡Ù” Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ Ù…Ø·Ø§Ø¨Ù‚ Ú©Ø¯ ÙˆØ§Ù‚Ø¹ÛŒ Ø´Ù…Ø§ Ø¢Ù…Ø§Ø¯Ù‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯.</p>

    <section class="card">
      <h2>ÙÙ‡Ø±Ø³Øª Ø³Ø±ÛŒØ¹</h2>
      <ul class="small">
        <li><a href="#products">Ù…Ø­ØµÙˆÙ„Ø§Øª (Products)</a></li>
        <li><a href="#orders">Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ (Orders)</a></li>
        <li><a href="#reports">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ (Reports)</a></li>
        <li><a href="#images">Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ±</a></li>
        <li><a href="#errors">Ø®Ø·Ø§Ù‡Ø§ Ùˆ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</a></li>
        <li><a href="#examples">Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„ (curl / Postman)</a></li>
        <li><a href="#tips">Ù†Ú©Ø§Øª ÙÙ†ÛŒ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</a></li>
        <li><a href="#tests">Ø¢Ø²Ù…Ø§ÛŒØ´ Ùˆ ØªØ³Øª</a></li>
      </ul>
    </section>

    <!-- PRODUCTS -->
    <section id="products" class="card endpoint">
      <h2>ğŸ§¶ Ù…Ø­ØµÙˆÙ„Ø§Øª (Products)</h2>
      <p class="muted">Ù…Ø¯Ù„ Ø§ØµÙ„ÛŒ: <code>Product</code>. ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ù‡Ù…: <code>type, branch, name, unit_price, sale_price, size, length, width, image</code>.</p>

      <article class="card endpoint">
        <h3><span class="method GET">GET</span> /api/products/ â€” Ù„ÛŒØ³ØªØŒ Ø¬Ø³ØªØ¬ÙˆØŒ ÙÛŒÙ„ØªØ± Ùˆ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ</h3>

        <h4>Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ Query</h4>
        <table>
          <thead><tr><th>Ù¾Ø§Ø±Ø§Ù…ØªØ±</th><th>Ú©Ø§Ø±Ø¨Ø±Ø¯</th><th>Ù…Ø«Ø§Ù„</th></tr></thead>
          <tbody>
            <tr><td><code>search</code></td><td>Ø¬Ø³ØªØ¬ÙˆÛŒ Ú†Ù†Ø¯Ú©Ù„Ù…Ù‡â€ŒØ§ÛŒ Ø¯Ø± name, description, serial_number, branch, size</td><td><code>?search=ØªØ¨Ø±ÛŒØ²+Ø§Ø¨Ø±ÛŒØ´Ù…</code></td></tr>
            <tr><td><code>type</code></td><td>ÙÛŒÙ„ØªØ± Ù†ÙˆØ¹: <code>carpet</code> ÛŒØ§ <code>tableau</code></td><td><code>?type=carpet</code></td></tr>
            <tr><td><code>branch</code></td><td>ÙÛŒÙ„ØªØ± Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§</td><td><code>?branch=naein</code></td></tr>
            <tr><td><code>min_price / max_price</code></td><td>ÙÛŒÙ„ØªØ± Ù‚ÛŒÙ…Øª (Ø±ÙˆÛŒ unit_price)</td><td><code>?min_price=5000000&amp;max_price=15000000</code></td></tr>
            <tr><td><code>size</code></td><td>ÙÛŒÙ„Ø¯ size Ù…Ø®ØµÙˆØµ <code>carpet</code></td><td><code>?size=2x3</code></td></tr>
            <tr><td><code>min_length / max_length</code></td><td>Ø§Ø¨Ø¹Ø§Ø¯ Ù…Ø®ØµÙˆØµ <code>tableau</code></td><td><code>?min_length=60&amp;max_length=120</code></td></tr>
            <tr><td><code>sort</code></td><td>Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ: <code>newest, oldest, price_low, price_high</code></td><td><code>?sort=price_high</code></td></tr>
          </tbody>
        </table>

        <h4>Ù…Ø«Ø§Ù„ ÙˆØ§Ù‚Ø¹ÛŒ</h4>
        <pre>GET /api/products/?search=Ø§Ø¨Ø±ÛŒØ´Ù…+ØªØ¨Ø±ÛŒØ²&amp;type=carpet&amp;min_price=5000000&amp;sort=price_high</pre>

        <h4>Ù†Ù…ÙˆÙ†Ù‡ Ù¾Ø§Ø³Ø®</h4>
        <pre>[
  {
    "id": 12,
    "type": "carpet",
    "branch": "tabriz",
    "serial_number": "T-889",
    "name": "ÙØ±Ø´ ØªØ¨Ø±ÛŒØ² Ø´Ø§Ù‡Ú©Ø§Ø±",
    "unit_price": "12000000.00",
    "sale_price": "15000000.00",
    "size": "2x3",
    "image": "/media/products/x.webp",
    "created_at": "1403/12/03 - 10:22",
    "updated_at": "1403/12/03 - 10:22"
  }
]</pre>

        <h4>Ù†Ú©Ø§Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ</h4>
        <ul>
          <li>Ø¬Ø³ØªØ¬Ùˆ Ù‚Ø¨Ù„ Ø§Ø² ÙÛŒÙ„ØªØ±Ù‡Ø§ Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ø±Ø§ÛŒ ÙØ§Ø±Ø³ÛŒ Ø­Ø±ÙˆÙ Ùˆ Ù†ÛŒÙ…â€ŒÙØ§ØµÙ„Ù‡ Ù†Ø±Ù…Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ú¯Ø±Ø¯Ø¯.</li>
          <li>Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª Ø²ÛŒØ§Ø¯ Ø§Ø² <code>select_related</code> / <code>prefetch_related</code> Ø¯Ø± ViewSet Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†.</li>
        </ul>
      </article>

      <article class="card endpoint">
        <h3><span class="method POST">POST</span> /api/products/ â€” Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ØµÙˆÙ„</h3>
        <p>ÙØ±Ø§Ù†Øª Ø¨Ø§ÛŒØ¯ <code>multipart/form-data</code> Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯ Ø§Ú¯Ø± Ø¹Ú©Ø³ Ù‡Ù…Ø±Ø§Ù‡ Ø§Ø³Øª.</p>

        <h4>Ù†Ù…ÙˆÙ†Ù‡ body</h4>
        <pre>Content-Type: multipart/form-data

{
  "type": "tableau",
  "branch": "manzare",
  "name": "ØªØ§Ø¨Ù„Ùˆ Ù…Ù†Ø¸Ø±Ù‡",
  "unit_price": 8000000,
  "sale_price": 9500000,
  "length": 70,
  "width": 100,
  "image": (file)
}
</pre>

        <h4>Ø±ÙØªØ§Ø± ØªØµÙˆÛŒØ±</h4>
        <p>Ù‚Ø¨Ù„ Ø§Ø² Ø°Ø®ÛŒØ±Ù‡ ØªØ§Ø¨Ø¹ <code>process_image</code> ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ ØªØµÙˆÛŒØ± Ø±Ø§ <strong>center-crop</strong> Ú©Ø±Ø¯Ù‡ØŒ Ø¨Ù‡ 300Ã—500 ØªØºÛŒÛŒØ± Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ ÙØ´Ø±Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ (WEBP Ù¾ÛŒØ´â€ŒÙØ±Ø¶).</p>
      </article>

      <article class="card endpoint">
        <h3><span class="method PATCH">PATCH</span> /api/products/{id}/ â€” ÙˆÛŒØ±Ø§ÛŒØ´</h3>
        <pre>{ "sale_price": 12500000 }</pre>

        <h3 style="margin-top:8px"><span class="method DELETE">DELETE</span> /api/products/{id}/ â€” Ø­Ø°Ù</h3>
      </article>
    </section>

    <!-- ORDERS -->
    <section id="orders" class="card endpoint">
      <h2>ğŸ§¾ Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§ (Orders)</h2>
      <p class="muted">Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ: <code>Order</code> Ùˆ <code>OrderItem</code>. Ù…Ù†Ø·Ù‚ Ù…Ø­Ø§Ø³Ø¨Ø§ØªÛŒÙ Ø³ÙØ§Ø±Ø´ Ø¯Ø± <code>OrderCreateSerializer.create()</code> Ùˆ Ø¯Ø± <code>OrderItem.save()</code> Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯ â€” Ù…Ø·Ø§Ø¨Ù‚ Ú©Ø¯ÛŒ Ú©Ù‡ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡ Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯.</p>

      <article class="card endpoint">
        <h3><span class="method POST">POST</span> /api/orders/ â€” Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙØ§Ø±Ø´</h3>

        <h4>ÙˆØ±ÙˆØ¯ÛŒ (Ù…Ø«Ø§Ù„)</h4>
        <pre>{
  "customer_name": "Ø¹Ù„ÛŒ",
  "customer_phone": "09120000000",
  "customer_address": "Ù‚Ù…",
  "items": [
    { "product": 1, "discount": 150000 },
    { "product": 2 }
  ]
}</pre>

        <h4>Ú¯Ø§Ù…â€ŒØ¨Ù‡â€ŒÚ¯Ø§Ù… Ù…Ø­Ø§Ø³Ø¨Ø§Øª (Ù…Ø«Ø§Ù„ Ø¹Ø¯Ø¯ÛŒ)</h4>
        <p>ÙØ±Ø¶ Ú©Ù†ÛŒÙ… Ù…Ø­ØµÙˆÙ„ A: <code>unit_price=2,000,000</code>, <code>sale_price=2,500,000</code> Ùˆ discount=300,000</p>
        <ol>
          <li><strong>price</strong> = sale_price = 2,500,000</li>
          <li><strong>final_price</strong> = price âˆ’ discount = 2,200,000</li>
          <li><strong>profit</strong> = final_price âˆ’ unit_price = 200,000</li>
        </ol>
        <p>Ø§Ú¯Ø± Ø³ÙØ§Ø±Ø´ Ø´Ø§Ù…Ù„ Ú†Ù†Ø¯ Ø¢ÛŒØªÙ… Ø¨Ø§Ø´Ø¯ØŒ <code>total_price</code> Ø¨Ø±Ø§Ø¨Ø± Ø¬Ù…Ø¹ Ù‡Ù…Ù‡ <code>final_price</code>Ù‡Ø§ Ùˆ <code>total_profit</code> Ø¨Ø±Ø§Ø¨Ø± Ø¬Ù…Ø¹ Ù‡Ù…Ù‡ <code>profit</code>Ù‡Ø§ Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯.</p>

        <h4>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø®Ù„ Ù¾Ø±ÙˆÚ˜Ù‡</h4>
        <pre class="small"># Ø®Ù„Ø§ØµÙ‡ Ø§Ø² OrderCreateSerializer.create()
order = Order.objects.create(..., total_price=0, total_profit=0)
for item in items:
    product = Product.objects.get(pk=...)
    price = product.sale_price or product.unit_price
    final_price = price - discount
    profit = final_price - product.unit_price
    OrderItem.objects.create(order=order, product=product, price=price, discount=discount, final_price=final_price, profit=profit)
order.total_price = sum(final_price)
order.total_profit = sum(profit)
order.save()</pre>

      </article>

      <article class="card endpoint">
        <h3><span class="method GET">GET</span> /api/orders/ â€” Ù„ÛŒØ³Øª Ø³ÙØ§Ø±Ø´â€ŒÙ‡Ø§</h3>

        <h4>Ù†Ù…ÙˆÙ†Ù‡â€ŒÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø§Ø³Ø® (Ù‡Ù…Ø§Ù†â€ŒØ·ÙˆØ± Ú©Ù‡ Ø§Ù„Ø§Ù† Ù¾Ø±ÙˆÚ˜Ù‡ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯)</h4>
        <pre>{
  "id": 3,
  "customer_name": "Ø¹Ù„ÛŒ",
  "customer_phone": "09120000000",
  "customer_address": "Ù‚Ù…",
  "total_price": "4900000.00",
  "total_profit": "600000.00",
  "order_date": "1403/12/05 - 14:33",
  "items": [
    {
      "id": 17,
      "product": { /* ProductSerializer full */ },
      "price": "2500000.00",
      "discount": "300000.00",
      "discount_percent": 12.0,
      "final_price": "2200000.00",
      "profit": "200000.00",
      "created_at": "1403/12/05 - 14:33"
    }
  ]
}
</pre>

        <h4>Ù¾Ø§Ø³Ø® Ú©ÙˆØªØ§Ù‡ Ø¨Ù‡ Ø³Ø¤Ø§Ù„Øª</h4>
        <p>Ø¨Ù„Ù‡Ø› <strong>profit Ù‡Ø± Ø¢ÛŒØªÙ…</strong> Ùˆ <strong>total_profit Ø³ÙØ§Ø±Ø´</strong> Ø¯Ø± Ø¨Ú©â€ŒØ§Ù†Ø¯ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ùˆ Ø¯Ø± Ø®Ø±ÙˆØ¬ÛŒ <code>GET /api/orders/</code> Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ù†ÛŒØ§Ø²ÛŒ Ù†ÛŒØ³Øª ÙØ±Ø§Ù†Øª Ú†ÛŒØ²ÛŒ Ø¯Ø± Ù…ÙˆØ±Ø¯ profit Ø§Ø±Ø³Ø§Ù„ Ú©Ù†Ø¯.</p>
      </article>

    </section>

    <!-- REPORTS -->
    <section id="reports" class="card endpoint">
      <h2>ğŸ“Š Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ (Reports)</h2>
      <p class="muted">Endpoints Ú¯Ø²Ø§Ø±Ø´ Ø·Ø¨Ù‚ Ú©Ø¯ Ø´Ù…Ø§: sales_by_product, total_revenue, total_profit, daily_sales, monthly_sales, yearly_sales, top_products, sales_range, dashboard.</p>

      <article class="card endpoint">
        <h3><span class="method GET">GET</span> /api/reports/sales_by_product/</h3>
        <pre>[{ "product": 1, "product__name": "ÙØ±Ø´ ØªØ¨Ø±ÛŒØ²", "sales_count": 12, "revenue": 12000000 }]</pre>
      </article>

      <article class="card endpoint">
        <h3><span class="method GET">GET</span> /api/reports/total_profit/</h3>
        <pre>{ "total_profit": 4500000 }</pre>
        <p class="muted">Ø§ÛŒÙ† Ù…Ù‚Ø¯Ø§Ø± Ù…Ø¬Ù…ÙˆØ¹ <code>total_profit</code> Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¬Ø¯ÙˆÙ„ <code>Order</code> Ø§Ø³Øª.</p>
      </article>

    </section>

    <!-- IMAGE PROCESSING -->
    <section id="images" class="card endpoint">
      <h2>ğŸ–¼ï¸ Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ± (Image Optimization)</h2>
      <p class="muted">ØªØ§Ø¨Ø¹ Ù†Ù…ÙˆÙ†Ù‡ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡: <code>process_image(image, size=(300,500), target_kb=100, format='WEBP')</code></p>

      <h4>Ú©Ø¯ Ù†Ù…ÙˆÙ†Ù‡Ù” Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ (Pillow)</h4>
      <pre>from PIL import Image
from io import BytesIO
from django.core.files.uploadedfile import InMemoryUploadedFile

def process_image(uploaded_file, size=(300,500), target_kb=100, output_format='WEBP'):
    img = Image.open(uploaded_file).convert('RGBA')
    # center crop to aspect ratio then resize to exact size
    # (Ú©Ø¯ Ú©Ø±Ø§Ù¾ Ùˆ resize...)
    buffer = BytesIO()
    quality = 90
    while True:
        buffer.seek(0); buffer.truncate()
        img.save(buffer, format=output_format, quality=quality)
        if buffer.tell()/1024 <= target_kb or quality <= 30:
            break
        quality -= 10
    buffer.seek(0)
    return InMemoryUploadedFile(buffer, None, f"img.{output_format.lower()}", f"image/{output_format.lower()}", buffer.getbuffer().nbytes, None)
</pre>

      <h4>ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§</h4>
      <ul>
        <li>Ø±ÙˆÛŒ Ø³Ø±ÙˆØ± ØªÙˆØ³Ø¹Ù‡ Ø§Ø² WebP Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ø› Ø§Ú¯Ø± Ú©Ù„Ø§ÛŒÙ†Øª Ù‚Ø¯ÛŒÙ…ÛŒ Ø¯Ø§Ø±ÛŒØŒ fallback Ø¨Ù‡ JPEG ÙØ±Ø§Ù‡Ù… Ú©Ù†.</li>
        <li>Ø¨Ø±Ø§ÛŒ ØªØ±Ø§ÙÛŒÚ© Ø¨Ø§Ù„Ø§ Ø§Ø² Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¢Ø³Ù†Ú©Ø±ÙˆÙ† (Celery) Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†.</li>
      </ul>
    </section>

    <!-- ERRORS & VALIDATION -->
    <section id="errors" class="card endpoint">
      <h2>âš ï¸ Ø®Ø·Ø§Ù‡Ø§ Ùˆ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</h2>
      <h4>Ù…Ø«Ø§Ù„ Ø®Ø·Ø§ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ (400)</h4>
      <pre>{ "items": ["items must be a non-empty list"] }</pre>

      <h4>Ú†Ú©â€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ù„</h4>
      <ul>
        <li>unit_price Ùˆ sale_price Ø§Ø² Ù„Ø­Ø§Ø¸ <code>CheckConstraint</code> ØºÛŒØ±Ù…Ù†ÙÛŒ Ù‡Ø³ØªÙ†Ø¯.</li>
        <li>Ø¯Ø± Serializer Ù‚ÙˆØ§Ù†ÛŒÙ† type vs size/length Ø¨Ø±Ø±Ø³ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li>
      </ul>
    </section>

    <!-- EXAMPLES -->
    <section id="examples" class="card endpoint">
      <h2>ğŸ“ Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ (curl / Ù…Ø«Ø§Ù„ Postman)</h2>

      <h4>Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ØµÙˆÙ„ Ø¨Ø§ curl (Ø¹Ú©Ø³)</h4>
      <pre>curl -X POST "http://127.0.0.1:8000/api/products/" \
  -H "Authorization: Token <TOKEN>" \
  -F "type=carpet" \
  -F "branch=tabriz" \
  -F "name=ÙØ±Ø´ ØªØ¨Ø±ÛŒØ²" \
  -F "unit_price=12000000" \
  -F "size=2x3" \
  -F "image=@/path/to/file.jpg"</pre>

      <h4>Ø§ÛŒØ¬Ø§Ø¯ Ø³ÙØ§Ø±Ø´ Ø¨Ø§ curl</h4>
      <pre>curl -X POST "http://127.0.0.1:8000/api/orders/" \
  -H "Content-Type: application/json" \
  -d '{"customer_name":"Ø¹Ù„ÛŒ","items":[{"product":1,"discount":150000}]}'</pre>
    </section>

    <!-- TIPS -->
    <section id="tips" class="card endpoint">
      <h2>âš™ï¸ Ù†Ú©Ø§Øª ÙÙ†ÛŒ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</h2>
      <ul>
        <li>Ø¨Ø±Ø§ÛŒ Ø³Ø±Ø¹Øª: Ø§Ø² <code>prefetch_related('items__product')</code> Ø¯Ø± OrderViewSet Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.</li>
        <li>Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø± Ø²ÛŒØ§Ø¯: Ù¾Ø±Ø¯Ø§Ø²Ø´ ØªØµÙˆÛŒØ± Ø±Ø§ Ø¨Ù‡ Celery Ù…Ù†ØªÙ‚Ù„ Ú©Ù† Ùˆ Ø¯Ø± Ù¾Ø§Ø³Ø® Ø§ÙˆÙ„ÛŒÙ‡ ÛŒÚ© URL Ù…ÙˆÙ‚ØªÛŒ Ø§Ø±Ø³Ø§Ù„ Ú©Ù†.</li>
        <li>Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø¨Ù‡ØªØ± ÙØ§Ø±Ø³ÛŒ: normalize Ú©Ù†ÛŒØ¯ (Ú©/Ú©Ø§ÙØŒ ÛŒ/ÛŒØ§Ø¡ØŒ Ø­Ø°Ù Ù†ÛŒÙ…â€ŒÙØ§ØµÙ„Ù‡) Ùˆ Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø§Ø³Øª Ø§Ø² Postgres trigram ÛŒØ§ ElasticSearch Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</li>
        <li>Ù…Ù‚Ø§Ø¯ÛŒØ± Ù¾ÙˆÙ„ÛŒ Ø±Ø§ Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø§ <code>Decimal</code> Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù† ØªØ§ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ø§Ø¹Ø´Ø§Ø±ÛŒ Ù¾ÛŒØ´ Ù†ÛŒØ§ÛŒØ¯.</li>
      </ul>
    </section>

    <!-- TESTS -->
    <section id="tests" class="card endpoint">
      <h2>ğŸ§ª ØªØ³Øª Ùˆ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ</h2>
      <p class="muted">Ù†Ù…ÙˆÙ†Ù‡ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯ (pytest / Django TestCase)</p>
      <pre>def test_create_order_creates_items_and_totals(client, django_db):
    payload = {"customer_name":"Ø¹Ù„ÛŒ","items":[{"product":product.id,"discount":10000}]}
    res = client.post('/api/orders/', payload, content_type='application/json')
    assert res.status_code == 201
    data = res.json()
    assert data['total_price'] == expected_total
    assert data['total_profit'] == expected_profit
</pre>
    </section>

    <footer class="muted small">Ø§Ú¯Ø± Ø¨Ø®ÙˆØ§Ù‡ÛŒ Ù…Ù† Ø§ÛŒÙ† Ø³Ù†Ø¯ Ø±Ø§ Ø¨Ù‡ PDF ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†Ù… ÛŒØ§ Ù†Ø³Ø®Ù‡Ù” Markdown/Swagger/OpenAPI ØªÙ‡ÛŒÙ‡ Ú©Ù†Ù… â€” Ø¨Ú¯Ùˆ ØªØ§ Ú©Ø§Ù…Ù„Ø´ Ú©Ù†Ù… (Ø¨Ø§ Ù†Ù…ÙˆÙ†Ù‡ Postman collection Ù‡Ù… Ø¢Ù…Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù…).</footer>
  </div>
</body>
</html>
